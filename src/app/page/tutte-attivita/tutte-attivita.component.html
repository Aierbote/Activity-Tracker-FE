<p-toast />
<app-admin-vis-tutte-att-users></app-admin-vis-tutte-att-users>

  <h1>Tutte le attività</h1>




<div class="filter-container" [formGroup]="filterForm">
  <div class="fix">
    <i style="margin-right: 5px;" class="pi pi-search"></i>
    <input type="text" pInputText placeholder="Cerca per nome, cognome o attività" formControlName="searchText">
  </div>
</div>

<div class="box">


  <p-table
  [value]="filteredItems.length ? filteredItems : rowItems"
  [lazy]="true"
  (onLazyLoad)="loadActivities($event)"
  sortField="user.firstName"
  [tableStyle]="{ 'min-width': '60rem' }"
  rowGroupMode="subheader"
  groupRowsBy="user.codiceFiscale"
  [paginator]="true"
  [rows]="limit"
  [totalRecords]="totalRecords"
  [loading]="loading"
  [style]="{ 'max-width': '90%', 'margin': '0 auto' }">
>
    <ng-template pTemplate="header">
      <tr>
        <th class="activities">Attività</th>
        <th>Stato</th>
        <th>Data</th>
        <th class="times">Orario di inizio</th>
        <th class="times">Orario di fine</th>
        <th class="notes">Note</th>
        <th class="buttons"></th>
        <th class="buttons"></th>
      </tr>
    </ng-template>
    <ng-template pTemplate="groupheader" let-act>
      <tr pRowGroupHeader>
        <td colspan="8">
          <img
            [alt]="act.user.firstName"
            src="https://i.pinimg.com/200x150/60/13/a3/6013a33f806d8d74f43ee2eb565ff4dc.jpg"
            width="32"
            style="vertical-align: middle; margin-right: 10px"
          />
          <span style="font-weight: bold;"
            >{{ act.user.firstName }} {{ act.user.lastName }}</span
          >
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-act let-rowIndex="rowIndex">
      <tr>
        <td>{{ act.taskName }}</td>
        <td *ngIf="act.isActive"><i class="pi pi-circle-fill" style="color: green"></i></td>
        <td *ngIf="!act.isActive"><i class="pi pi-circle-fill" style="color: red"></i></td>
        <td>{{ act.startTime | date: "dd/MM/yyyy" }}</td>
        <td>{{ act.startTime | date: "HH:mm" }}</td>
        <td>{{ act.endTime | date:"HH:mm" }}</td>
        <td>{{ act.notes }}</td>
        <td><edit-activity [activity]="activityToSend(act)"></edit-activity></td>
        <td><delete-activity [activityID]="act._id"></delete-activity></td>
      </tr>
    </ng-template>
  </p-table>
</div>
<br>
<div style="display: flex; justify-content: center;flex-direction: column;align-items: center;">
<input
  type="number"
  pInputText
  [(ngModel)]="tempLimit" 
  placeholder="Inserisci il limite"
  style="width: 160px;"
/>
<br>
<p-button label="Invia" (click)="changeLimit()" size="small"></p-button>
</div>
<br /><br />