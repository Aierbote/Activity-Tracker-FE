<app-admin-vis-tutte-att-users />

<div class="filter">
  <input
    type="text"
    pInputText
    [(ngModel)]="textFilter"
    placeholder="Nome, cognome o attività"
  />
  <p-button
    type="button"
    pRipple
    [text]="true"
    [rounded]="true"
    [plain]="true"
    [icon]="'pi pi-filter'"
    (click)="onClickSetFilter()"
  />
  <p-button
    type="button"
    pRipple
    [text]="true"
    [rounded]="true"
    [plain]="true"
    [icon]="'pi pi-filter-slash'"
    (click)="onClickRemoveFilter()"
  />
</div>

<div class="box">
  <p-table
    [value]="rowItems"
    [lazy]="true"
    (onLazyLoad)="loadActivities($event)"
    sortField="user.firstName"
    [tableStyle]="{ 'min-width': '60rem' }"
    rowGroupMode="subheader"
    groupRowsBy="user.codiceFiscale"
    [paginator]="true"
    [rows]="7"
    [totalRecords]="totalRecords"
    [loading]="loading"
  >
    <ng-template pTemplate="header">
      <tr>
        <th class="activities">Attività</th>
        <th>Data</th>
        <th class="times">Orario di inizio</th>
        <th class="times">Orario di fine</th>
        <th class="notes">Note</th>
        <th class="buttons"></th>
        <th class="buttons"></th>
      </tr>
    </ng-template>
    <ng-template pTemplate="groupheader" let-act>
      <tr pRowGroupHeader>
        <td colspan="7">
          <img
            [alt]="act.user.firstName"
            src="https://i.pinimg.com/200x150/60/13/a3/6013a33f806d8d74f43ee2eb565ff4dc.jpg"
            width="32"
            style="vertical-align: middle; margin-right: 10px"
          />
          <span style="font-weight: bold;"
            >{{ act.user.firstName }} {{ act.user.lastName }}</span
          >
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-act let-rowIndex="rowIndex">
      <tr>
        <td>{{ act.taskName }}</td>
        <td>{{ act.activityDate | date: "dd/MM/yyyy" }}</td>
        <td>{{ act.startTime | date: "HH:mm" }}</td>
        <td>{{ act.endTime | date:"HH:mm" }}</td>
        <td>{{ act.notes }}</td>
        <td><edit-activity [activity]="act" /></td>
        <td><delete-activity [activityID]="act._id" /></td>
      </tr>
    </ng-template>
  </p-table>
</div>

